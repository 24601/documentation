Заголовок: «Внешнее хранилище»
MetaTitle: «Внешнее хранилище»
MetaDescription: «Как изменить место по умолчанию для сохранения записей»

Записи OpenReplay [сеансов](/configuration/cleanup-storage#recordingstorage) по умолчанию хранятся на вашем экземпляре, но место назначения может быть изменено на любое сервис объектного хранилища, совместимого с S3, что позволяет достичь большей масштабируемости и низких затрат на развертывание.

## Изменение места назначения записей

Записи могут быть сохранены в любом месте хранения объектов, при условии, что оно совместимо с S3, что делает OpenReplay совместимым со всеми основными облачными службами общего пользования. Ниже приведены шаги для настройки другого места назначения для ваших записей:

### Создание необходимых корзин

Вы должны создать нижеуказанные корзины в вашем сервисе хранения объектов. Их имена могут быть разными, но мы будем использовать нижеуказанные ссылки в остальной части этого раздела:
- `openreplay-recordings`: где будут сохраняться записи
- `openreplay-assets`: где будут копироваться активы (такие как css и шрифты)
- `openreplay-sourcemaps`: для хранения карт источников (см. [как их загрузить](/installation/upload-sourcemaps))

После создания корзины:

1. Включите CORS для каждой из вышеуказанных корзин. Если вы находитесь на AWS, это будет под «Разрешения > Обмен кросс-оригинальными ресурсами (CORS)» с использованием следующей конфигурации:


```json
[
    {
        "AllowedHeaders": [
            "*"
        ],
        "AllowedMethods": [
            "GET"
        ],
        "AllowedOrigins": [
            "*"
        ],
        "ExposeHeaders": []
    }
]
```


2. Включите общий доступ к корзине `openreplay-assets` **только**. Эта последняя содержит только таблицы стилей, значки и шрифты, необходимые для правильного повтора сеанса. Если вы находитесь на AWS, сначала перейдите в «Разрешения > Блокировка общего доступа (настройки корзины)» и отключите ее, а затем перейдите в «Разрешения > Политика корзины» и используйте следующую конфигурацию:


```json
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "AddPerm",
            "Effect": "Allow",
            "Principal": "*",
            "Action": "s3:GetObject",
            "Resource": "arn:aws:s3:::openreplay-assets/*"
        }
    ]
}
```


3. Наконец, убедитесь, что сгенерированы соответствующие ключи доступа к **этим 3 корзинам только**, чтобы бэкенд OpenReplay мог программно к ним получить доступ для загрузки файлов. Требуемые разрешения S3:


```json
"s3:PutObject",
"s3:GetObjectAcl",
"s3:GetObject",
"s3:GetObjectTagging",
"s3:ListBucket",
"s3:PutObjectTagging",
"s3:GetBucketLocation"
```

