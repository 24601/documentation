Заголовок: «Идентификация пользователя»
MetaTitle: «Идентификация пользователя»
MetaDescription: «Как связать внутренний идентификатор пользователя с записью сеанса»

Импортируйте YoutubeVideo из «~/components/YoutubeVideo.astro»

<YoutubeVideo title="Смотрите, как идентифицировать пользователей в ваших переиграх"
description="Если вы не любите читать, вы можете следовать этому видеоуроку, показывающему, как связать ваши переигры с вашими пользователями."
videoURL="https://youtu.be/xfotXkeyXZM"
/>

Свяжите внутренний идентификатор пользователя с записью сеанса, следуя нижеприведенным шагам.

### С помощью NPM

Вставьте идентификатор пользователя при запуске трекера:


```js
const tracker = new OpenReplay({
  projectKey: PROJECT_KEY
});

tracker.start({
  userID: "john@doe.com",
  metadata: {
    balance: "10M",
    plan: "free"
  }
});
```


Если это невозможно (идентификатор пользователя известен позже в процессе навигации, то есть далеко после запуска трекера), вызовите метод setUserID для идентификации ваших пользователей. Идентификация пользователя может быть изменена в любое время во время сеанса, вызвав setUserID. Однако OpenReplay будет сохранять только последний вставленный идентификатор пользователя.


```js
tracker.setUserID('john@doe.com'); // after tracker.start()
```


### С помощью сниппета JavaScript

Ниже приведен пример вставки идентификатора пользователя с помощью сниппета. Обратите внимание на переменную/строку startOpts для вставки идентификатора пользователя.


```js
<!-- OpenReplay Tracking Code -->
<script>
var initOpts = { projectKey: "GxPpaDARdn2345fgt321" };
var startOpts = { userID: getUserID() }; // use startOpts variable to inject userID
(function(A,s,a,y,e,r){
  r=window.OpenReplay=[e,r,y,[s-1, e]];
  s=document.createElement('script');s.src=A;s.async=!a;
  ...
})("//static.openreplay.com/latest/openreplay.js", 1, 0, initOpts, startOpts);
</script>
```


Если это невозможно (идентификатор пользователя известен позже в процессе навигации, то есть далеко после запуска трекера), вместо этого вызовите метод setUserID для идентификации ваших пользователей. Идентификация пользователя может быть изменена в любое время во время сеанса, вызвав setUserID. Однако OpenReplay будет сохранять только последний вставленный идентификатор пользователя.


```js
<!-- OpenReplay Tracking Code -->
<script>
var initOpts = { projectKey: "GxPpaDARdn2345fgt321" };
var startOpts = { userID: "" };
(function(A,s,a,y,e,r){
  r=window.OpenReplay=[e,r,y,[s-1, e]];
  s=document.createElement('script');s.src=A;s.async=!a;
  ...
})("//static.openreplay.com/latest/openreplay.js", 1, 0, initOpts, startOpts);
</script>
  ...
  OpenReplay.setUserID("john@doe.com"); // set the userID later in your code
  ...
```

