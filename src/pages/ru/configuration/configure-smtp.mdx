Определенные функции, такие как «уведомления», «еженедельные отчеты», «сброс пароля» и «приглашение новых пользователей», **требуют** отправки электронной почты. Поэтому, если вы не настроите SMTP, эти функции не будут работать. Мы настоятельно рекомендуем использовать поставщика услуг электронной почты (ESP), такого как Mailgun или SendGrid, для максимальной надежности и доставки. Ниже мы предоставляем пошаговое руководство по настройке Mailgun, но любой другой поставщик также справится с этой задачей.

## Настройка SMTP

Чтобы включить SMTP, выполните `openreplay -e` и обновите следующие переменные окружения в разделе «электронная почта»:

| Переменная | По умолчанию | Описание |
|----------|-------------|-------------|
| emailHost |  | Имя хоста SMTP (например, smtp.mailgun.org) |
| emailPort | 587 | Порт SMTP |
| emailUser |  | Имя пользователя SMTP |
| emailPassword |  | Пароль SMTP |
| emailUseTls | true | Для использования TLS при подключении к хосту SMTP |
| emailUseSsl | false | Для использования SSL при подключении к хосту SMTP |
| emailSslKey |  | Путь к вашему ключу SSL (если применимо) |
| emailSslCert |  | Путь к вашему сертификату SSL (если применимо) |
| emailFrom | do-not-reply@openreplay.com | Адрес отправителя |

Затем сохраните и выйдите, используя `:wq`, чтобы изменения вступили в силу. Вы можете протестировать настройку, пригласив себя (с другого адреса электронной почты) в качестве нового члена команды (в «Настройках»> «Пользователи»).

## Mailgun

1. Перейдите в раздел «Отправка»> «Домены», затем нажмите «Добавить новый домен».
2. Введите ваш субдомен (например, m.mycompany.com) в «Имя домена» и убедитесь, что отмечена опция «Создать авторитет DKIM», предпочтительно с длиной ключа 2048.
3. Перейдите к поставщику DNS (конкретные инструкции предоставляет Mailgun) и добавьте **все отображаемые записи**.
4. После добавления всех записей нажмите «Проверить настройки DNS».
5. Теперь перейдите в раздел «Отправка»> «Настройки домена»> «Учетные данные SMTP» и нажмите «Добавить нового пользователя SMTP». Введите «Логин» (например, openreplay), затем нажмите «Создать учетные данные SMTP». Должно появиться всплывающее окно, нажмите «Копировать», чтобы скопировать сгенерированный пароль
```yaml
emailHost: 'smtp.eu.mailgun.org' # from SMTP settings section
emailPort: '587'
emailUser: 'openreplay@mycompany.com' # from SMTP credentials section
emailPassword: 'password' # the one copied when you created SMTP credentials
emailUseTls: 'true'
emailUseSsl: 'false'
emailSslKey: ''
emailSslCert: ''
emailFrom: 'openreplay@mycompany.com' # sender email, use your domain'
```
