Заголовок: «Развертывание на Scaleway»
Мета-заголовок: «Развертывание на Scaleway»
Мета-описание: «Шаг за шагом инструкция по развертыванию OpenReplay на Scaleway Elements»
Расположение: ~/layouts/MainLayout.astro
i18nReady: true

Стек OpenReplay можно установить на один экземпляр, а Scaleway Elements является идеальным кандидатом. Вот как это сделать.

## Запуск экземпляра

1. Перейдите в панель управления Scaleway
2. Перейдите в раздел «Вычисления> Экземпляры», а затем нажмите «Создать экземпляр»
3. Выберите предпочитаемую зону доступности
4. Выберите образ. Для этого руководства мы будем использовать *Ubuntu Server 20.04 Focal Fossa*
5. Выберите тип экземпляра. Минимальные требования - `2 vCPUs, 8 GB ОЗУ, 50 GB хранения`, иначе службы фонового обслуживания OpenReplay просто не запустятся. Поэтому мы рекомендуем **по крайней мере** `DEV1-L` (или эквивалент), что достаточно для низкого / умеренного объема. Если вы ожидаете высокой нагрузки, вы должны масштабировать отсюда.
6. Добавьте объемы: установите размер по крайней мере в 50 ГБ (локально или блочное хранилище)
7. Дайте вашему экземпляру сладкое имя (например, openreplay)
8. Ключи SSH: убедитесь, что у вас уже есть ключ, связанный с вашим проектом, чтобы вы могли подключиться к экземпляру
9. Нажмите «Создать новый экземпляр»

> **Примечание:** Порты SMTP (25, 465, 587) по умолчанию заблокированы Scaleway. Ваш экземпляр OpenReplay не сможет отправлять электронные письма, если вы не включите SMTP из конфигурации группы безопасности. Чтобы сделать это, проверьте этот [краткий учебник](https://www.scaleway.com/en/faq/why-can-i-not-send-any-email/).

## Развертывание OpenReplay

1. Убедитесь, что ваш экземпляр запущен, а затем подключитесь к нему:


```bash
## From your terminal
SSH_KEY=~/Downloads/openreplay-key.pem #! wherever you've saved the SSH key
INSTANCE_IP=REPLACE_WITH_INSTANCE_PUBLIC_IP
chmod 400 $SSH_KEY
ssh -i $SSH_KEY root@$INSTANCE_IP
```


2. Установите OpenReplay, указав домен, на котором он будет работать (например, DOMAIN_NAME = openreplay.mycompany.com):


```bash
sudo wget https://raw.githubusercontent.com/openreplay/openreplay/main/scripts/helmcharts/openreplay-cli -O /bin/openreplay 
sudo chmod +x /bin/openreplay
openreplay -i DOMAIN_NAME
```


## Настройка TLS / SSL

OpenReplay имеет дело с чувствительными данными пользователей и поэтому требуется HTTPS для работы. Это обязательно, иначе трекер просто не начнет запись. То же самое и для панели управления, без HTTPS вы не сможете повторить сеансы пользователей.

Вам придется привести (или сгенерироват
```yaml
ingress-nginx: &ingress-nginx
  controller:
    config:
      ssl-redirect: true
      force-ssl-redirect: true
```
