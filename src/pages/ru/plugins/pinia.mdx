---
Заголовок: «Pinia»
MetaTitle: «Pinia»
MetaDescription: «Плагин Pinia для OpenReplay»
---
Импортируйте компонент Aside из «~/components/Aside.astro».

Этот плагин позволяет захватывать мутации/состояния Pinia и просматривать их позже при воспроизведении записей сеансов. Это очень полезно для понимания и устранения проблем.

<Aside type="tip">
У нас также есть подробное руководство по использованию плагина Pinia для захвата состояния вашего приложения при использовании этой библиотеки, вы можете проверить его [здесь](/tutorials/pinia).
</Aside>

## Установка


```bash
npm i @openreplay/tracker-vuex
```


## Использование

Инициализируйте пакет «@openreplay/tracker», как обычно, и загрузите плагин в него. Вызовите плагин и установите имя хранилища, это вернет экземпляр трекера с именем, который вы можете вызвать с примером хранилища в качестве аргумента для включения отслеживания этого хранилища.

### Если ваш сайт является одностраничным приложением (SPA)


```js
import OpenReplay from '@openreplay/tracker';
import trackerVuex from '@openreplay/tracker-vuex';
```


### Если ваше веб-приложение отрисовывается на стороне сервера (SSR)


```js
import OpenReplay from '@openreplay/tracker/cjs';
import trackerVuex from '@openreplay/tracker-vuex/cjs';
```


### Отслеживание хранилища Pinia


```js

//...

const tracker = new OpenReplay({
  projectKey: PROJECT_KEY
  // ... options
});

// ...

const examplePiniaStore = useExamplePiniaStore()
const vuexPlugin = tracker.use(trackerVuex(<options>)) // check list of available options below

const piniaStorePlugin = vuexPlugin('STORE NAME') // add a name to your store, 
                                                  // optional (will be randomly generated otherwise)
piniaStorePlugin(examplePiniaStore) // start tracking state updates

// now you can use examplePiniaStore as usual pinia store (destructure values or return it as a whole etc)
```


## Опции

Вы можете настроить поведение плагина с помощью опций для санитаризации ваших данных. Они похожи на стандартные опции плагина «createLogger».


```js
trackerVuex({
  filter (mutation, state) {
    // returns `true` if a mutation should be logged
    // `mutation` is a `{ type, payload }`
    return mutation.type !== "aBlacklistedMutation";
  },
  transformer (state) {
    // transforms the state before logging it.
    // for example return only a specific sub-tree
    return state.subTree;
  },
  mutationTransformer (mutation) {
    // mutations are logged in the format of `{ type, payload }`
    // we can format it any way we want.
    return mutation.type;
  },
})
```

