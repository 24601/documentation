Используем термин «эвристика» для простых и надежных алгоритмов, используемых для обнаружения проблем, таких как высокая загрузка ЦП или клик-рейт. Здесь мы используем один пример, чтобы понять, как работают эвристики и как создать свой собственный детектор и увидеть его результаты в DevTools.

## Шаблоны

Шаблон для эвристики находится по пути «openreplay / backend / pkg / handlers / custom».

Когда метод эвристики создан, он может быть добавлен, изменив файл «main.go» по пути «openreplay / backend / cmd / heuristics», импортируя модуль costum и добавляя пользовательскую функцию в обработчик сообщений.

## Быстрый пример возврата

Для этого примера мы создадим эвристику «Быстрый возврат», которая будет отправлять сигнал каждый раз, когда мы возвращаемся на тот же URL менее чем за пять секунд. Реализованный метод для обнаружения такого события будет использовать события «SetPageLocation» и «MouseClick». Каждый раз, когда мы имеем клик мышью, мы обновляем текущее время и, если сообщение «SetPageEvent» получено в течение пяти следующих секунд, указывающее текущую веб-страницу, то мы возвращаем событие QuickReturn.

Для начала создадим файл «quickreturn.go» по пути «openreplay / backend / pkg / handlers / custom», содержащий код, показанный ниже.

Теперь, когда эвристика создана, ее нужно включить. Для этого нам нужно добавить эвристику в файл «main.go» по пути «openreplay / backend / cmd / heuristics», как показано ниже:
```tsx
package custom

import . "openreplay/backend/pkg/messages"

type CustomHandler struct {
	lastTimestamp uint64
}

func (h *CustomHandler) Handle(message Message, messageID uint64, timestamp uint64) Message {
	h.lastTimestamp = timestamp
	return nil
}

func (h *CustomHandler) Build() Message {
	return nil
}
```
