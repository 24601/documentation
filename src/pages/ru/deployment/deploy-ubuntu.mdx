---
Заголовок: «Развертывание на Ubuntu»
metaTitle: «Развертывание на Ubuntu»
metaDescription: «Шаг за шагом руководство по развертыванию OpenReplay на любой машине Ubuntu»
layout: ~/layouts/MainLayout.astro
i18nReady: true
---

Стек OpenReplay можно установить на одну машину с ОС Ubuntu. Вот как это сделать.

## Предварительные требования

- Операционная система должна быть *Ubuntu Server 20.04 Focal Fossa*.
- Минимальные требования для машины, на которой запускается OpenReplay, составляют `2 vCPU, 8 ГБ ОЗУ, 50 ГБ памяти`, иначе службы фонового уровня OpenReplay просто не запустятся. Этого должно быть достаточно для низкой / умеренной нагрузки. Если вы ожидаете высокой посещаемости, вы должны будете масштабировать отсюда.
- Общедоступный IP-адрес, указывающий на вашу машину.

## Развертывание OpenReplay

1. Убедитесь, что ваша машина запущена, а затем подключитесь к ней через SSH от имени root

2. Установите OpenReplay, указав домен, на котором он будет работать (например, DOMAIN_NAME = openreplay.mycompany.com):


```bash
sudo wget https://raw.githubusercontent.com/openreplay/openreplay/main/scripts/helmcharts/openreplay-cli -O /bin/openreplay 
sudo chmod +x /bin/openreplay
openreplay -i DOMAIN_NAME
```


## Настройка TLS / SSL

OpenReplay имеет дело с чувствительными данными пользователей и поэтому требуется HTTPS для работы. Это обязательно, иначе трекер просто не начнет запись. То же самое и для панели управления, без HTTPS вы не сможете повторить сеансы пользователей.

Вам потребуется предоставить (или сгенерировать) свой собственный SSL-сертификат.

1. Сначала перейдите к провайдеру услуг DNS, отредактируйте вашу зону DNS и создайте «A Record». Используйте домен, который вы ранее указали во время установки, и укажите на машину с помощью ее общедоступного IP-адреса.

2. Если вы приводите свой собственный сертификат, создайте секрет SSL, используя следующую команду: `kubectl create secret tls openreplay-ssl -n app --key="private_key_file.pem" --cert="certificate.crt"`.

> **Примечание:** Если у вас нет сертификата, генерируйте его самообновляющийся для вашего поддомена (того, который был указан во время установки) с помощью Let's Encrypt. Просто подключитесь к машине OpenReplay, запустите `cd /var/lib/openreplay/openreplay/scripts/helmcharts && bash certmanager.sh` и следуйте инструкциям.

3. Если вы хотите включить перенаправление http на https (рекомендуется), то раскомментируйте нижеприведенный блок в разделе `ingress-nginx` в `/var/lib/openreplay/vars.yaml`:
```yaml
ingress-nginx: &ingress-nginx
  controller:
    config:
      ssl-redirect: true
      force-ssl-redirect: true
```
