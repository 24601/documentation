['---\ntitle: "نشر على Digital Ocean"\nmetaTitle: "نشر على Digital Ocean"\nmetaDescription: "دليل خطوة بخطوة لنشر OpenReplay على Digital Ocean."\nlayout: ~/layouts/MainLayout.astro\ni18nReady: true\n---\n\nيمكن تثبيت مجموعة OpenReplay على جهاز واحد (droplet) وDigital Ocean هو المرشح المثالي. هذا هو كيفية القيام بذلك.\n\n## إنشاء droplet\n\n1. إنشاء مشروع جديد (إذا لم تفعل ذلك بالفعل) ثم الانتقال إليه والنقر على droplet 'Create'\n2. اختيار صورة *Ubuntu Server 20.04 LTS*\n4. الذهاب لـ 'Shared CPU' واختيار خطة `Regular Intel | 4 CPUs | 8GB`. هذه هي المواصفات الأدنى، وإلا لن تبدأ خدمات OpenReplay الخلفية بسهولة. هذه كافية لحجم معتدل، ولكن إذا كنت تتوقع حركة عالية، يجب عليك التزامن من هنا.\n5. انقر فوق 'New SSH key' في 'Authentication' واتبع التعليمات لإنشاء مفتاح\n6. إعطاء جهازك اسم ثم النقر على 'Create droplet'\n\n## نشر OpenReplay\n\n1. تأكد من أن droplet الخاص بك هو `active` ثم الاتصال به:\n\n
```bash
## From your terminal
SSH_KEY=~/Downloads/openreplay-key.pem ## wherever you've saved the SSH key
INSTANCE_IP=REPLACE_WITH_DROPLET_PUBLIC_IP
chmod 400 $SSH_KEY
ssh -i $SSH_KEY root@$INSTANCE_IP
```
', '\n\n2. قم بتثبيت OpenReplay عن طريق توفير النطاق الذي سيتم تشغيله عليه (مثلا DOMAIN_NAME=openreplay.mycompany.com):\n\n
```bash
git clone https://github.com/openreplay/openreplay.git
cd openreplay/scripts/helmcharts
DOMAIN_NAME=openreplay.mycompany.com bash init.sh
```
', '\n\n## تكوين TLS/SSL\n\nيتعامل OpenReplay مع بيانات المستخدم الحساسة وبالتالي يتطلب HTTPS للتشغيل. هذا إلزامي، وإلا لن يبدأ المتعقب بتسجيل بسهولة. نفس الشيء لوحة القيادة، دون HTTPS لن تتمكن من إعادة تشغيل جلسات المستخدم.\n\nيجب عليك بالتالي إنشاء (أو جلب) شهادة SSL الخاصة بك.\n\n1. أولا، انتقل إلى 'Manage' > 'Networking' > 'Domains' (أو مزود خدمة DNS الآخر) وإنشاء سجل 'A'. استخدم النطاق الذي سبق أن توفرته أثناء خطوة التثبيت واقترحه إلى droplet باستخدام عنوان IP العام (يمكن العثور عليه في علامة التبويب Droplets).\n\n2. إذا كنت تجلب شهادة SSL الخاصة بك، فأنشئ سرية SSL باستخدام الأمر التالي: `kubectl create secret tls openreplay-ssl -n app --key="private_key_file.pem" --cert="certificate.crt"`.\n\n> **ملاحظة:** إذا لم يكن لديك شهادة، فأنشئ واحدة تتجدد تلقائيًا للنطاق الفرعي (الذي توفرته أثناء التثبيت) باستخدام Let's Encrypt. ببساطة الاتصال بdroplet OpenReplay، قم بتشغيل `cd openreplay/scripts/helmcharts && bash certmanager.sh` واتبع الخطوات.\n\n3. إذا كنت ترغب في تمكين التحويل من http إلى https (موصى به)، فقم بإلغاء تعليق الكتلة أدناه، تحت جزء 'ingress-nginx'، في `/var/lib/openreplay/vars.yaml`:\n   \n
```yaml
ingress-nginx: &ingress-nginx
  controller:
    config:
      ssl-redirect: true
      force-ssl-redirect: true
```
', "\n\nيستحسن أن نذكر أن `ingress-nginx` يعمل بشكل افتراضي على المنافذ `80|443`، ولكن يمكن تغييره بسهولة، إذا لزم الأمر، في `vars.yaml`:\n\n
```yaml
ingress-nginx: &ingress-nginx
  controller:
    service:
      ports:
        http: 80
        https: 443
```
", '\n\n4. وأخيرًا إعادة تثبيت OpenReplay NGINX:\n\n
```bash
openreplay -R
```
']
