---
العنوان: "استخدام OpenReplay مع Svelte"
metaTitle: "استخدام المتعقب داخل مشروع Svelte"
metaDescription: "تعلم كيفية بدء تتبع مستخدميك في مشروع Svelte الخاص بك"
---
استيراد GoDeeperFooter من '~/components/go-deeper-footer.astro'

تثبيت متعقب OpenReplay في مشروع مبني على Svelte يتم بشكل مباشر بصورة كبيرة.

المفتاح لجعله يعمل هو استخدام السياق، والذي بالرغم من أنه يبدو مشابها لكيف نفعل ذلك مع Next.js، فإن التنفيذ سيكون مختلفاً.

## مشروع عينة

إذا كنت ترغب في مراجعة الكود الكامل لهذا المشروع، فتحقق من [المشروع الذي سنستخدمه خلال هذا الدليل](https://github.com/deleteman/openreplay-svelte-example).

هذا هو مشروع SvelteKit العينة الذي يمكنك نسخه واختباره بمتابعة التعليمات في ملف Readme.

بمجرد النشر والتكوين، يجب أن تتمكن من التقاط تشغيلات الجلسة كما هو موضح في الصورة التالية:

![Svelte session replay](images/svelte-session.png)

## استخدام السياق لمشاركة البيانات

هذه الحلة ستستخدم سياق Svelte، والذي يتيح لك مشاركة البيانات بين المكون الأب وجميع أطفاله (مشابها لمزود سياق React).

في هذا الحالة على وجه الخصوص، سنضيف المتعقب لقسم المشرف في تطبيقنا، لذلك سنضبط السياق داخل ملف تخطيط المشرف (src / layout / Admin.svelte). ثم نبدأه في الصفحة الأولى التي يتم تحميلها داخل هذا القسم.

## إنشاء سياق المتعقب

داخل ملف `src/layout/Admin.svelte`، داخل وسم `script`، لنضيف الكود التالي:


```jsx
import {Tracker, key} from "../context/tracker"

let tracker = new Tracker({
    projectKey: __myapp.env.OPENREPLAY_PROJECT_KEY
});
  
setContext(key, {
 getTracker: () => tracker
} )
```


بطبيعة الحال، ستكون هناك المزيد من الكود داخل هذا الملف ولكن ما نراه هنا هو مهم لنا الآن.

1. نقوم أولاً باستيراد المتعقب من OpenReplay ومتغير مفتاح (المزيد عن هذه في الثاني).
2. ثم نقوم بتوليد المتعقب. كما يمكنك رؤيته، الخيار الوحيد الذي نستخدمه هو مفتاح المشروع، والذي ستحصل عليه من واجهة المستخدم بعد إعداد المشروع في OpenReplay.
3. نحفظ نسخة المتعقب في السياق الذي يتم إنشاؤه باستدعاء `setContext`. سيستخدم المتغير `key` لاسترجاع هذه القيمة من السياق.

💡**ملاحظة للمستخدمين الذين يستضيفون ذاتهم:** إذا كنت تستخدم نسخة المضيف الذاتي لـ OpenReplay، فسيتطلب منك أيضًا تحديد خاصية التكوين `ingestPoint` في الخطوة 2. يحدد هذه الخاصية نقطة استيراد لبيانات المتعقب. لا يحتاج المستخدمون السحابيون إلى هذا، لأنه بشكل افتراضي، يعرف المتعقب أين هو نقطة استيراد نسخة الخدمة لهذا، ولكن إذا كنت تستضيفه ذاتك، فستحتاج إلى تحديده (يجب أن يكون شيئًا مثل `https://openreplay.mydomain.com/ingest`).

## استخدام سياق المتعقب

استخدام السياق (واستدعاء طريقة الاستدعاء) هو بسيط كالحصول على السياق من خلال وظيفة `getContext` من S
```jsx
import {key} from "../../context/tracker"
  
let {getTracker} = getContext(key)
onMount( () => {
	let tracker = getTracker()
	tracker.start()
})
```
