---
العنوان: "المستخدمون"
metaTitle: "المستخدمون"
metaDescription: "كيفية إدارة والتحكم في بيانات المستخدم."
---
استيراد Aside من '~/components/Aside.astro'

## الحصول على إحصائيات المستخدم

الحصول على بعض الإحصائيات العليا والتفاصيل حول مستخدم معين، الذي تم التعرف عليه عبر وظيفة JavaScript `tracker.setUserID`. يقوم هذا النقطة النهائية بإرجاع أشياء مثل `firstSeen`، `lastSeen` و `numberSessions`.

### الطريقة
`GET`

### الرابط
`/api/v1/:projectKey/users/:userId`

### المعلمات

| الاسم | النوع | الوصف |
|----------|-------------|-------------|
| projectKey | string | معرف المشروع الذي تتتبعه (مطلوب) |
| userId | string | معرف المستخدم الخاص بك، الذي يتم تعيينه عبر `tracker.setUserID` (مطلوب) |

### رؤوس الطلب

`Authorization: {YOUR_ORGANIZATION_API_KEY}`: يمكن العثور على المفتاح في 'التفضيلات' > 'الحساب' > 'مفتاح API للمنظمة'.

### أكواد الحالة

`200`: تم إرسال الاستجابة كجيسون في الجسم

### طلب عينة


```shell
curl -X GET \
  https://openreplay.example.com/api/v1/3sWXSsqHgSKnE87YkNJK/users/mickael@openreplay.com \
  -H 'content-type: application/json' \
  -H 'Authorization: {YOUR_ORGANIZATION_API_KEY}'
```


### استجابة عينة


```json
{
  "data": {
    "userId": "mickael@openreplay.com",
    "sessionCount": 3,
    "lastSeen": 1623689478617,
    "firstSeen": 1623440822825
  }
}
```


## حذف المستخدم

حذف مستخدم (الذي تم التعرف عليه عبر وظيفة JavaScript `tracker.setUserID`) وجميع بياناته التي تم تحصيلها بواسطة OpenReplay. يشغل هذا عملية خلفية واحدة في الوقت لإزالة جميع البيانات المتعلقة بالمستخدم، بما في ذلك الجلسات، الأحداث، البيانات الوصفية، الأحداث المخصصة والتسجيلات. يقوم الاستدعاء بإرجاع `jobID` يمكنك استخدامه لاحقًا للتحقق [من](/api/jobs#getjobdetails) حالة العملية الحذف.

هذا يأتي في الوقت المناسب لمعالجة طلبات GDPR التي قد تتلقاها من المستخدمين النهائيين.

<Aside type="note">
	ستزيل العملية الحذف أقصى عدد 1000 من الجلسات المرتبطة بالمستخدم المحدد.
</Aside>

### الطريقة
`DELETE`

### الرابط
`/api/v1/:projectKey/users/:userId`

### المعلمات

| الاسم | النوع | الوصف |
|----------|-------------|-------------|
| projectKey | string | معرف المشروع الذي تتتبعه (مطلوب) |
| userId | string | معرف المستخدم الخاص بك، الذي يتم تعيينه عبر `tracker.setUserID` (مطلوب) |

### رؤوس الطلب

`Authorization: {YOUR_ORGANIZATION_API_KEY}`: يمكن العثور على المفتاح في 'التفضيلات' > 'الحساب' > 'مفتاح API للمنظمة'.

### أكواد الحالة

`200`: تم إرسال الاستجابة كجيسون في الجسم

### طلب عينة


```shell
curl -X DELETE \
  https://openreplay.example.com/api/v1/3sWXSsqHgSKnE87YkNJK/users/mickael@example.com \
  -H 'content-type: application/json' \
  -H 'Authorization: {YOUR_ORGANIZATION_API_KEY}'
```


### استجابة عينة


```json
{
  "data": {
    "jobId": 22345,
    "description": "Delete user sessions of userId = mickael@example.com",
    "status": "scheduled",
    "projectId": 1,
    "action": "delete_user_data",
    "referenceId": "mehdi@openreplay.com",
    "createdAt": 1623912962910,
    "updatedAt": 1623912962910,
    "startAt": 1623954600000,
    "errors": null
  }
}
```


### تغيير وقت حذف ملف الإعادة التشغيل؟

العملية الحذف هي عملية مرحلتين: أولا، تتم حذف الجلسات والأحداث المتصاعدة من قاعدة البيانات في وقت الليل. ثانيًا، يتم جدولة الملفات الإعادة التشغيل للانتهاء (في 30 يومًا) في التخزين الكائني.

إذا كنت تستخدم minio (تثبيت عادي)، وترغب في تغيير السياسة الافتراضية للانتهاء / الحياة، فاتبع الإرشادات التالية:
1. في الخادم الخاص بك، قم بتشغيل `openreplay -e`
2. تحت قسم `chalice`، قم بتعريف متغير بيئي جديد باسم **SCH_DELETE_DAYS** بقيمة تساوي عدد الأ
```bash
export EXPIRATION_DAYS=14
mc ilm add --expiry-days $EXPIRATION_DAYS --tags "to_delete_in_days=${EXPIRATION_DAYS}" minio/mobs
```
