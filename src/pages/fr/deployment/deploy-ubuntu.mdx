---
titre: "Déployer sur Ubuntu"
metaTitle: "Déployer sur Ubuntu"
metaDescription: "Guide étape par étape pour déployer OpenReplay sur n'importe quelle machine Ubuntu."
layout: ~/layouts/MainLayout.astro
i18nReady: true
---

La pile OpenReplay peut être installée sur une seule machine exécutant Ubuntu. Voici comment le faire.

## Prérequis

- Le système d'exploitation doit être *Ubuntu Server 20.04 Focal Fossa*.
- Les spécifications minimales pour la machine exécutant OpenReplay sont `2 vCPUs, 8 Go de RAM, 50 Go de stockage`, sinon les services backend OpenReplay ne démarreront tout simplement pas. Cela devrait suffire pour un volume faible / modéré. Si vous vous attendez à un trafic élevé, vous devez le mettre à l'échelle à partir d'ici.
- Une adresse IP publique pointant vers votre machine.

## Déployer OpenReplay

1. Assurez-vous que votre machine est démarrée, puis connectez-vous à elle via SSH en tant que root

2. Installez OpenReplay en fournissant le domaine sur lequel il sera exécuté (par exemple DOMAIN_NAME = openreplay.mycompany.com):


```bash
sudo wget https://raw.githubusercontent.com/openreplay/openreplay/main/scripts/helmcharts/openreplay-cli -O /bin/openreplay 
sudo chmod +x /bin/openreplay
openreplay -i DOMAIN_NAME
```


## Configurer TLS / SSL

OpenReplay traite des données d'utilisateur sensibles et nécessite donc HTTPS pour fonctionner. C'est obligatoire, sinon le suivi ne commencerait tout simplement pas à enregistrer. La même chose s'applique au tableau de bord, sans HTTPS vous ne pourrez pas rejouer les sessions utilisateur.

Vous devez donc apporter (ou générer) votre propre certificat SSL.

1. Tout d'abord, allez chez votre fournisseur de service DNS, modifiez votre zone DNS et créez un enregistrement `A`. Utilisez le domaine que vous avez précédemment fourni lors de l'étape d'installation et pointez-le vers la machine à l'aide de son adresse IP publique.

2. Si vous apportez votre propre certificat, créez un secret SSL à l'aide de la commande suivante: `kubectl create secret tls openreplay-ssl -n app --key="private_key_file.pem" --cert="certificate.crt"`.

> **Note:** Si vous n'avez pas de certificat, générez-en un, qui se renouvelle automatiquement, pour votre sous-domaine (celui fourni lors de l'installation) à l'aide de Let's Encrypt. Connectez-vous simplement à la machine OpenReplay, exécutez `cd /var/lib/openreplay/openreplay/scripts/helmcharts && bash certmanager.sh` et suivez les étapes.

3. Si vous souhaitez activer la redirection http vers https (recommandé), décommentez alors le bloc ci-dessous, dans la section `ingress-nginx`, dans `/var/lib/openreplay/vars.yaml`:
  

```yaml
ingress-nginx: &ingress-nginx
  controller:
    config:
      ssl-redirect: true
      force-ssl-redirect: true
```


Il est à noter que notre `ingress-nginx` s'exécute par défaut sur les ports `80 | 443`, mais cela peut être facilement modifié, si nécessaire, dans `vars.yaml`:


```yaml
ingress-nginx: &ingress-nginx
  controller:
    service:
      ports:
        http: 80
        https: 443
```


4. Enfin, réinstallez OpenReplay NGINX:


```bash
openreplay -R
```

